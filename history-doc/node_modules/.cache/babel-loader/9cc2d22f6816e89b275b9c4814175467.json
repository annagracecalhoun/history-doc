{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\annag\\\\Dropbox\\\\Fall 2021\\\\Source\\\\history-doc\\\\history-doc\\\\src\\\\Components\\\\MainBod.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Timeline from \"./Timeline\";\nimport Event from \"./Event.js\";\nimport \"../styles/MainBod.css\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport firestore from \"../firebase.js\";\nimport { addDoc, getDocs, collection } from \"firebase/firestore/lite\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MainBod() {\n  _s();\n\n  const [newTimeTitle, setNewTimeTitle] = useState(\"\");\n  const [newTimeSubtitle, setNewTimeSubtitle] = useState(\"\");\n  const [showNewTime, setshowNewTime] = useState(false);\n  const [timeArr, settimeArr] = useState([]);\n  const [searchVal, setsearchVal] = useState(\"\");\n  const [searchRes, setsearchRes] = useState([]);\n\n  const changesearchVal = e => {\n    setsearchVal(e.target.value);\n  };\n\n  const changeNewTimeTitle = e => {\n    setNewTimeTitle(e.target.value);\n  };\n\n  const changeNewTimeSubtitle = e => {\n    setNewTimeSubtitle(e.target.value);\n  };\n\n  useEffect(() => {\n    let allTimes = collection(firestore, \"timelines\");\n    getDocs(allTimes).then(snapshot => {\n      // snapshot is array of all documents\n      let tempTimelines = [];\n      snapshot.forEach(document => {\n        tempTimelines.push({ ...document.data(),\n          id: document.id\n        });\n      });\n      settimeArr(tempTimelines); // set initial state of timeArr\n    });\n  }, []);\n\n  const createTime = () => {\n    if (newTimeTitle.length > 0 && newTimeSubtitle.length > 0) {\n      const docRef = addDoc(collection(firestore, \"timelines\"), {\n        title: newTimeTitle,\n        subtitle: newTimeSubtitle\n      });\n      settimeArr([{\n        id: docRef.id,\n        title: newTimeTitle,\n        subtitle: newTimeSubtitle\n      }, ...timeArr]);\n      setNewTimeSubtitle(\"\");\n      setNewTimeTitle(\"\");\n      setshowNewTime(false);\n    }\n  };\n\n  const getSearchRes = () => {\n    // reroute to new page on click \n    if (searchVal === \"\") {\n      return;\n    }\n\n    let allEvents = collection(firestore, \"events\");\n    getDocs(allEvents).then(snapshot => {\n      // snapshot is array of all documents\n      let tempEvents = [];\n      snapshot.forEach(document => {\n        if (document.data().content.toLowerCase().includes(searchVal.toLowerCase()) || document.data().title.toLowerCase().includes(searchVal.toLowerCase())) {\n          tempEvents.push(document.data());\n        }\n      });\n      setsearchRes(tempEvents.sort(sortByDate));\n    });\n  };\n\n  const sortByDate = (a, b) => {\n    var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    const a1 = a.date.split(' ');\n    const b1 = b.date.split(' ');\n\n    if (parseInt(a1[a1.length - 1]) > parseInt(b1[b1.length - 1])) {\n      return -1;\n    }\n\n    if (parseInt(a1[a1.length - 1]) < parseInt(b1[b1.length - 1])) {\n      return 1;\n    }\n\n    if (a1.length === 3 && b1.length === 3 && a1[0] === b1[0] && parseInt(a1[1].replace(',', '')) > parseInt(b1[1].replace(',', ''))) {\n      return -1;\n    }\n\n    if (a1.length === 3 && b1.length === 3 && a1[0] === b1[0] && parseInt(a1[1].replace(',', '')) < parseInt(b1[1].replace(',', ''))) {\n      return 1;\n    }\n\n    if (a1[0] === b1[0]) {\n      return -1;\n    } else {\n      return months.indexOf(b1[0]) - months.indexOf(a1[0]);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Router, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mainHead\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pageTitle\",\n          children: \"Mr.Worldwide\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"subtitle\",\n          children: \"Global Events Tracking.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"searchBar\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"search for a keyword\",\n            type: \"text\",\n            value: searchVal,\n            onChange: changesearchVal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"searchButton\",\n            onClick: getSearchRes,\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/searchRes\",\n              children: \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 69\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/searchRes\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"searchTitle\",\n            children: [\"Search Results for: \", searchVal]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"searchEvents\",\n            children: searchRes.map((x, i) => /*#__PURE__*/_jsxDEV(Event, {\n              title: x.title,\n              content: x.content,\n              source: x.source,\n              sourceText: x.sourceText,\n              date: x.date,\n              tags: x.tags\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 9\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"timelinesHead\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"thTitle\",\n              children: \"Your Timelines\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setshowNewTime(!showNewTime),\n              className: \"addTime\",\n              children: \"Create Timeline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this), showNewTime ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inpTime\",\n            children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"inputList\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Create a new timeline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 44\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Add events\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"timeline title\",\n              type: \"text\",\n              value: newTimeTitle,\n              onChange: changeNewTimeTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"timeline subtitle\",\n              type: \"text\",\n              value: newTimeSubtitle,\n              onChange: changeNewTimeSubtitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: createTime,\n              className: \"addTline\",\n              children: \"Add Timeline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 29\n          }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pageCenter\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"timelineBox\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tLines\",\n                children: timeArr.map((x, i) => /*#__PURE__*/_jsxDEV(Timeline, {\n                  timeId: x.id,\n                  title: x.title,\n                  subtitle: x.subtitle\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 15\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 13\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"podBox\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"podTitle\",\n                children: \"Get Caught Up\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n                src: \"https://www.bbc.co.uk/programmes/p02nq0gn/episodes/downloads\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 20\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MainBod, \"iUN2cVSybA7xDEXPnKVhK098q4Q=\");\n\n_c = MainBod;\nexport default MainBod;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainBod\");","map":{"version":3,"sources":["C:/Users/annag/Dropbox/Fall 2021/Source/history-doc/history-doc/src/Components/MainBod.js"],"names":["React","useEffect","useState","Timeline","Event","BrowserRouter","Router","Switch","Route","Link","firestore","addDoc","getDocs","collection","MainBod","newTimeTitle","setNewTimeTitle","newTimeSubtitle","setNewTimeSubtitle","showNewTime","setshowNewTime","timeArr","settimeArr","searchVal","setsearchVal","searchRes","setsearchRes","changesearchVal","e","target","value","changeNewTimeTitle","changeNewTimeSubtitle","allTimes","then","snapshot","tempTimelines","forEach","document","push","data","id","createTime","length","docRef","title","subtitle","getSearchRes","allEvents","tempEvents","content","toLowerCase","includes","sort","sortByDate","a","b","months","a1","date","split","b1","parseInt","replace","indexOf","map","x","i","source","sourceText","tags"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,KAAP,MAAkB,YAAlB;AACA,OAAO,uBAAP;AACA,SAAQC,aAAa,IAAIC,MAAzB,EAAiCC,MAAjC,EAAyCC,KAAzC,EAAgDC,IAAhD,QAA2D,kBAA3D;AACA,OAAOC,SAAP,MAAsB,gBAAtB;AACA,SAAQC,MAAR,EAAgBC,OAAhB,EAAyBC,UAAzB,QAA0C,yBAA1C;;;AAEA,SAASC,OAAT,GAAmB;AAAA;;AACf,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCd,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACe,eAAD,EAAkBC,kBAAlB,IAAwChB,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAACiB,WAAD,EAAcC,cAAd,IAAgClB,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAACmB,OAAD,EAAUC,UAAV,IAAwBpB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACqB,SAAD,EAAYC,YAAZ,IAA4BtB,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACuB,SAAD,EAAYC,YAAZ,IAA4BxB,QAAQ,CAAC,EAAD,CAA1C;;AAEA,QAAMyB,eAAe,GAAIC,CAAD,IAAO;AAC3BJ,IAAAA,YAAY,CAACI,CAAC,CAACC,MAAF,CAASC,KAAV,CAAZ;AACH,GAFD;;AAIA,QAAMC,kBAAkB,GAAIH,CAAD,IAAO;AAC9BZ,IAAAA,eAAe,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf;AACH,GAFD;;AAIA,QAAME,qBAAqB,GAAIJ,CAAD,IAAO;AACjCV,IAAAA,kBAAkB,CAACU,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB;AACH,GAFD;;AAIA7B,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIgC,QAAQ,GAAGpB,UAAU,CAACH,SAAD,EAAY,WAAZ,CAAzB;AACIE,IAAAA,OAAO,CAACqB,QAAD,CAAP,CAAkBC,IAAlB,CAAuBC,QAAQ,IAAI;AAAQ;AACvC,UAAIC,aAAa,GAAG,EAApB;AACAD,MAAAA,QAAQ,CAACE,OAAT,CAAiBC,QAAQ,IAAI;AACzBF,QAAAA,aAAa,CAACG,IAAd,CAAmB,EAAC,GAAGD,QAAQ,CAACE,IAAT,EAAJ;AAAqBC,UAAAA,EAAE,EAAEH,QAAQ,CAACG;AAAlC,SAAnB;AACH,OAFD;AAIJnB,MAAAA,UAAU,CAACc,aAAD,CAAV,CANmC,CAMF;AAChC,KAPD;AAQH,GAVI,EAUF,EAVE,CAAT;;AAYI,QAAMM,UAAU,GAAE,MAAM;AACxB,QAAI3B,YAAY,CAAC4B,MAAb,GAAsB,CAAtB,IAA2B1B,eAAe,CAAC0B,MAAhB,GAAwB,CAAvD,EAA0D;AACtD,YAAMC,MAAM,GAAGjC,MAAM,CAACE,UAAU,CAACH,SAAD,EAAY,WAAZ,CAAX,EAAqC;AACtDmC,QAAAA,KAAK,EAAE9B,YAD+C;AACjC+B,QAAAA,QAAQ,EAAE7B;AADuB,OAArC,CAArB;AAEAK,MAAAA,UAAU,CAAC,CAAC;AAACmB,QAAAA,EAAE,EAAEG,MAAM,CAACH,EAAZ;AAAgBI,QAAAA,KAAK,EAAE9B,YAAvB;AAAqC+B,QAAAA,QAAQ,EAAE7B;AAA/C,OAAD,EAAkE,GAAGI,OAArE,CAAD,CAAV;AACAH,MAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACAF,MAAAA,eAAe,CAAC,EAAD,CAAf;AACAI,MAAAA,cAAc,CAAC,KAAD,CAAd;AACC;AACR,GATG;;AAWJ,QAAM2B,YAAY,GAAG,MAAM;AAAI;AAC3B,QAAIxB,SAAS,KAAK,EAAlB,EAAsB;AAClB;AACH;;AACD,QAAIyB,SAAS,GAAGnC,UAAU,CAACH,SAAD,EAAY,QAAZ,CAA1B;AACAE,IAAAA,OAAO,CAACoC,SAAD,CAAP,CAAmBd,IAAnB,CAAwBC,QAAQ,IAAI;AAAQ;AACpC,UAAIc,UAAU,GAAG,EAAjB;AACAd,MAAAA,QAAQ,CAACE,OAAT,CAAiBC,QAAQ,IAAI;AACzB,YAAIA,QAAQ,CAACE,IAAT,GAAgBU,OAAhB,CAAwBC,WAAxB,GAAsCC,QAAtC,CAA+C7B,SAAS,CAAC4B,WAAV,EAA/C,KAA2Eb,QAAQ,CAACE,IAAT,GAAgBK,KAAhB,CAAsBM,WAAtB,GAAoCC,QAApC,CAA6C7B,SAAS,CAAC4B,WAAV,EAA7C,CAA/E,EAAsJ;AAClJF,UAAAA,UAAU,CAACV,IAAX,CAAgBD,QAAQ,CAACE,IAAT,EAAhB;AACC;AACR,OAJD;AAKAd,MAAAA,YAAY,CAACuB,UAAU,CAACI,IAAX,CAAgBC,UAAhB,CAAD,CAAZ;AACV,KARE;AASH,GAdD;;AAgBA,QAAMA,UAAU,GAAG,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACzB,QAAIC,MAAM,GAAG,CAAC,SAAD,EAAY,UAAZ,EAAwB,OAAxB,EAAiC,OAAjC,EAA0C,KAA1C,EAAiD,MAAjD,EACb,MADa,EACL,QADK,EACK,WADL,EACkB,SADlB,EAC6B,UAD7B,EACyC,UADzC,CAAb;AAEA,UAAMC,EAAE,GAAGH,CAAC,CAACI,IAAF,CAAOC,KAAP,CAAa,GAAb,CAAX;AACA,UAAMC,EAAE,GAAGL,CAAC,CAACG,IAAF,CAAOC,KAAP,CAAa,GAAb,CAAX;;AACA,QAAIE,QAAQ,CAACJ,EAAE,CAACA,EAAE,CAACf,MAAH,GAAU,CAAX,CAAH,CAAR,GAA4BmB,QAAQ,CAACD,EAAE,CAACA,EAAE,CAAClB,MAAH,GAAU,CAAX,CAAH,CAAxC,EAA2D;AACvD,aAAO,CAAC,CAAR;AACH;;AACD,QAAImB,QAAQ,CAACJ,EAAE,CAACA,EAAE,CAACf,MAAH,GAAU,CAAX,CAAH,CAAR,GAA4BmB,QAAQ,CAACD,EAAE,CAACA,EAAE,CAAClB,MAAH,GAAU,CAAX,CAAH,CAAxC,EAA2D;AACvD,aAAO,CAAP;AACH;;AACD,QAAIe,EAAE,CAACf,MAAH,KAAc,CAAd,IAAmBkB,EAAE,CAAClB,MAAH,KAAc,CAAjC,IAAuCe,EAAE,CAAC,CAAD,CAAF,KAAUG,EAAE,CAAC,CAAD,CAAnD,IAA0DC,QAAQ,CAACJ,EAAE,CAAC,CAAD,CAAF,CAAMK,OAAN,CAAc,GAAd,EAAmB,EAAnB,CAAD,CAAR,GAAmCD,QAAQ,CAACD,EAAE,CAAC,CAAD,CAAF,CAAME,OAAN,CAAc,GAAd,EAAmB,EAAnB,CAAD,CAAzG,EAAmI;AAC/H,aAAO,CAAC,CAAR;AACH;;AACD,QAAIL,EAAE,CAACf,MAAH,KAAc,CAAd,IAAmBkB,EAAE,CAAClB,MAAH,KAAc,CAAjC,IAAuCe,EAAE,CAAC,CAAD,CAAF,KAAUG,EAAE,CAAC,CAAD,CAAnD,IAA0DC,QAAQ,CAACJ,EAAE,CAAC,CAAD,CAAF,CAAMK,OAAN,CAAc,GAAd,EAAmB,EAAnB,CAAD,CAAR,GAAmCD,QAAQ,CAACD,EAAE,CAAC,CAAD,CAAF,CAAME,OAAN,CAAc,GAAd,EAAmB,EAAnB,CAAD,CAAzG,EAAmI;AAC/H,aAAO,CAAP;AACH;;AACD,QAAIL,EAAE,CAAC,CAAD,CAAF,KAAUG,EAAE,CAAC,CAAD,CAAhB,EAAqB;AACjB,aAAO,CAAC,CAAR;AACH,KAFD,MAGK;AACD,aAAOJ,MAAM,CAACO,OAAP,CAAeH,EAAE,CAAC,CAAD,CAAjB,IAAwBJ,MAAM,CAACO,OAAP,CAAeN,EAAE,CAAC,CAAD,CAAjB,CAA/B;AACH;AACJ,GAvBD;;AAyBA,sBACI;AAAA,2BACI,QAAC,MAAD;AAAA,8BACA;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA,gCACA;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,eAEA;AAAM,UAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFA,eAGA;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA,kCACA;AAAO,YAAA,WAAW,EAAC,sBAAnB;AAA0C,YAAA,IAAI,EAAC,MAA/C;AAAsD,YAAA,KAAK,EAAEnC,SAA7D;AAAwE,YAAA,QAAQ,EAAEI;AAAlF;AAAA;AAAA;AAAA;AAAA,kBADA,eAEA;AAAQ,YAAA,SAAS,EAAC,cAAlB;AAAiC,YAAA,OAAO,EAAEoB,YAA1C;AAAA,mCAAwD,QAAC,IAAD;AAAM,cAAA,EAAE,EAAC,YAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAxD;AAAA;AAAA;AAAA;AAAA,kBAFA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHA;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,eASA,QAAC,MAAD;AAAA,gCACI,QAAC,KAAD;AAAO,UAAA,KAAK,MAAZ;AAAa,UAAA,IAAI,EAAC,YAAlB;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,aAAf;AAAA,+CAAkDxB,SAAlD;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAK,YAAA,SAAS,EAAC,cAAf;AAAA,sBACCE,SAAS,CAACwC,GAAV,CAAc,CAACC,CAAD,EAAIC,CAAJ,kBAC3B,QAAC,KAAD;AAAe,cAAA,KAAK,EAAID,CAAC,CAACrB,KAA1B;AAAiC,cAAA,OAAO,EAAGqB,CAAC,CAAChB,OAA7C;AAAsD,cAAA,MAAM,EAAEgB,CAAC,CAACE,MAAhE;AAAwE,cAAA,UAAU,EAAEF,CAAC,CAACG,UAAtF;AAAkG,cAAA,IAAI,EAAEH,CAAC,CAACP,IAA1G;AAAgH,cAAA,IAAI,EAAEO,CAAC,CAACI;AAAxH,eAAYH,CAAZ;AAAA;AAAA;AAAA;AAAA,oBADa;AADD;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAQA,QAAC,KAAD;AAAO,UAAA,KAAK,MAAZ;AAAa,UAAA,IAAI,EAAC,GAAlB;AAAA,kCACA;AAAK,YAAA,SAAS,EAAC,eAAf;AAAA,oCACJ;AAAM,cAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADI,eAEJ;AAAQ,cAAA,OAAO,EAAE,MAAM/C,cAAc,CAAC,CAACD,WAAF,CAArC;AAAqD,cAAA,SAAS,EAAG,SAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFI;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,EAMGA,WAAW,gBAAE;AAAK,YAAA,SAAS,EAAG,SAAjB;AAAA,oCACZ;AAAI,cAAA,SAAS,EAAC,WAAd;AAAA,2CAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA3B,eACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADY,eAIZ;AAAO,cAAA,WAAW,EAAG,gBAArB;AAAsC,cAAA,IAAI,EAAC,MAA3C;AAAkD,cAAA,KAAK,EAAEJ,YAAzD;AAAuE,cAAA,QAAQ,EAAEgB;AAAjF;AAAA;AAAA;AAAA;AAAA,oBAJY,eAKZ;AAAO,cAAA,WAAW,EAAG,mBAArB;AAAyC,cAAA,IAAI,EAAC,MAA9C;AAAqD,cAAA,KAAK,EAAEd,eAA5D;AAA6E,cAAA,QAAQ,EAAEe;AAAvF;AAAA;AAAA;AAAA;AAAA,oBALY,eAMZ;AAAQ,cAAA,OAAO,EAAEU,UAAjB;AAA6B,cAAA,SAAS,EAAE,UAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBANY;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAF,GAOL,IAbT,eAcA;AAAK,YAAA,SAAS,EAAG,YAAjB;AAAA,oCACA;AAAK,cAAA,SAAS,EAAE,aAAhB;AAAA,qCACJ;AAAK,gBAAA,SAAS,EAAC,QAAf;AAAA,0BACKrB,OAAO,CAAC4C,GAAR,CAAY,CAACC,CAAD,EAAIC,CAAJ,kBACX,QAAC,QAAD;AAAkB,kBAAA,MAAM,EAAID,CAAC,CAACzB,EAA9B;AAAkC,kBAAA,KAAK,EAAIyB,CAAC,CAACrB,KAA7C;AAAoD,kBAAA,QAAQ,EAAEqB,CAAC,CAACpB;AAAhE,mBAAeqB,CAAf;AAAA;AAAA;AAAA;AAAA,wBADD;AADL;AAAA;AAAA;AAAA;AAAA;AADI;AAAA;AAAA;AAAA;AAAA,oBADA,oBAMO;AAAK,cAAA,SAAS,EAAG,QAAjB;AAAA,sCACH;AAAM,gBAAA,SAAS,EAAE,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADG,eAEH;AAAQ,gBAAA,GAAG,EAAC;AAAZ;AAAA;AAAA;AAAA;AAAA,sBAFG;AAAA;AAAA;AAAA;AAAA;AAAA,oBANP;AAAA;AAAA;AAAA;AAAA;AAAA,kBAdA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARA;AAAA;AAAA;AAAA;AAAA;AAAA,cATA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAiDH;;GArIQrD,O;;KAAAA,O;AAuIT,eAAeA,OAAf","sourcesContent":["import React, {useEffect, useState} from \"react\"; \r\nimport Timeline from \"./Timeline\";\r\nimport Event from \"./Event.js\";\r\nimport \"../styles/MainBod.css\";\r\nimport {BrowserRouter as Router, Switch, Route, Link} from \"react-router-dom\"; \r\nimport firestore from \"../firebase.js\";\r\nimport {addDoc, getDocs, collection} from \"firebase/firestore/lite\";\r\n\r\nfunction MainBod() {\r\n    const [newTimeTitle, setNewTimeTitle] = useState(\"\"); \r\n    const [newTimeSubtitle, setNewTimeSubtitle] = useState(\"\"); \r\n    const [showNewTime, setshowNewTime] = useState(false);\r\n    const [timeArr, settimeArr] = useState([]); \r\n    const [searchVal, setsearchVal] = useState(\"\"); \r\n    const [searchRes, setsearchRes] = useState([]); \r\n\r\n    const changesearchVal = (e) => {\r\n        setsearchVal(e.target.value); \r\n    }; \r\n    \r\n    const changeNewTimeTitle = (e) => {\r\n        setNewTimeTitle(e.target.value); \r\n    }; \r\n\r\n    const changeNewTimeSubtitle = (e) => {\r\n        setNewTimeSubtitle(e.target.value); \r\n    }; \r\n\r\n    useEffect(() => {\r\n        let allTimes = collection(firestore, \"timelines\"); \r\n            getDocs(allTimes).then(snapshot => {       // snapshot is array of all documents\r\n                let tempTimelines = []; \r\n                snapshot.forEach(document => {\r\n                    tempTimelines.push({...document.data(), id: document.id})\r\n                }); \r\n    \r\n            settimeArr(tempTimelines)        // set initial state of timeArr\r\n            }); \r\n        }, []); \r\n\r\n        const createTime= () => {\r\n        if (newTimeTitle.length > 0 && newTimeSubtitle.length >0) {\r\n            const docRef = addDoc(collection(firestore, \"timelines\"), {\r\n                title: newTimeTitle, subtitle: newTimeSubtitle})\r\n            settimeArr([{id: docRef.id, title: newTimeTitle, subtitle: newTimeSubtitle}, ...timeArr])\r\n            setNewTimeSubtitle(\"\"); \r\n            setNewTimeTitle(\"\"); \r\n            setshowNewTime(false); \r\n            }\r\n    }; \r\n\r\n    const getSearchRes = () => {   // reroute to new page on click \r\n        if (searchVal === \"\") {\r\n            return; \r\n        }\r\n        let allEvents = collection(firestore, \"events\"); \r\n        getDocs(allEvents).then(snapshot => {       // snapshot is array of all documents\r\n                let tempEvents = []; \r\n                snapshot.forEach(document => {\r\n                    if (document.data().content.toLowerCase().includes(searchVal.toLowerCase()) || document.data().title.toLowerCase().includes(searchVal.toLowerCase())) { \r\n                        tempEvents.push(document.data()) \r\n                        } \r\n                });\r\n                setsearchRes(tempEvents.sort(sortByDate)); \r\n     });\r\n    }\r\n\r\n    const sortByDate = (a, b) => {\r\n        var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n        \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n        const a1 = a.date.split(' ');\r\n        const b1 = b.date.split(' '); \r\n        if (parseInt(a1[a1.length-1]) > parseInt(b1[b1.length-1])) {\r\n            return -1; \r\n        }\r\n        if (parseInt(a1[a1.length-1]) < parseInt(b1[b1.length-1])) {\r\n            return 1; \r\n        }\r\n        if (a1.length === 3 && b1.length === 3 &&  a1[0] === b1[0] && parseInt(a1[1].replace(',', '')) > parseInt(b1[1].replace(',', ''))) {\r\n            return -1; \r\n        }\r\n        if (a1.length === 3 && b1.length === 3 &&  a1[0] === b1[0] && parseInt(a1[1].replace(',', '')) < parseInt(b1[1].replace(',', ''))) {\r\n            return 1; \r\n        }\r\n        if (a1[0] === b1[0]) {\r\n            return -1; \r\n        }\r\n        else {\r\n            return months.indexOf(b1[0]) - months.indexOf(a1[0]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Router>\r\n            <div className=\"mainHead\">\r\n            <div className=\"pageTitle\">Mr.Worldwide</div>\r\n            <span className=\"subtitle\">Global Events Tracking.</span>\r\n            <div className=\"searchBar\">\r\n            <input placeholder=\"search for a keyword\" type=\"text\" value={searchVal} onChange={changesearchVal}></input>\r\n            <button className=\"searchButton\" onClick={getSearchRes}><Link to=\"/searchRes\">Search</Link></button>\r\n            </div>\r\n            </div>\r\n            <Switch>\r\n                <Route exact path=\"/searchRes\">\r\n                    <div className=\"searchTitle\">Search Results for: {searchVal}</div>\r\n                    <div className=\"searchEvents\"> \r\n                    {searchRes.map((x, i) => \r\n        <Event key={i} title = {x.title} content ={x.content} source={x.source} sourceText={x.sourceText} date={x.date} tags={x.tags}></Event>)}\r\n        </div>\r\n                    </Route> \r\n            <Route exact path=\"/\">\r\n            <div className=\"timelinesHead\">\r\n        <span className=\"thTitle\">Your Timelines</span>\r\n        <button onClick={() => setshowNewTime(!showNewTime)} className = \"addTime\">Create Timeline</button>\r\n            </div>\r\n    \r\n            {  showNewTime ?<div className = \"inpTime\"> \r\n                <ul className=\"inputList\"> <li>Create a new timeline</li> \r\n                <li>Add events</li>\r\n                </ul>\r\n                <input placeholder = \"timeline title\" type=\"text\" value={newTimeTitle} onChange={changeNewTimeTitle}></input>\r\n                <input placeholder = \"timeline subtitle\" type=\"text\" value={newTimeSubtitle} onChange={changeNewTimeSubtitle}></input>\r\n                <button onClick={createTime} className= \"addTline\">Add Timeline</button>\r\n            </div> : null} \r\n            <div className = \"pageCenter\">\r\n            <div className =\"timelineBox\">\r\n        <div className=\"tLines\">\r\n            {timeArr.map((x, i) => \r\n              <Timeline key={i} timeId = {x.id} title = {x.title} subtitle={x.subtitle}></Timeline>)}\r\n              </div>\r\n            </div> <div className = \"podBox\">\r\n                <span className= \"podTitle\">Get Caught Up</span>\r\n                <iframe src=\"https://www.bbc.co.uk/programmes/p02nq0gn/episodes/downloads\"></iframe>\r\n            </div>\r\n            </div>\r\n            </Route>\r\n            </Switch> \r\n            </Router>\r\n        </div>\r\n    ); \r\n}\r\n\r\nexport default MainBod; \r\n"]},"metadata":{},"sourceType":"module"}