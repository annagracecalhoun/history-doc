{"ast":null,"code":"import _toConsumableArray from\"C:/Users/annag/Dropbox/Fall 2021/Source/history-doc/history-doc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/annag/Dropbox/Fall 2021/Source/history-doc/history-doc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Event from\"./Event.js\";import\"../styles/Timeline.css\";import firestore from\"../firebase.js\";import{addDoc,getDocs,collection}from\"firebase/firestore/lite\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Timeline(props){// set state for all elements of timeline\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),eventArr=_useState2[0],seteventArr=_useState2[1];var _useState3=useState(props.title),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showNew=_useState6[0],setshowNew=_useState6[1];// new event fields \nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),newTitle=_useState8[0],setNewTitle=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),newContent=_useState10[0],setNewContent=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),newSource=_useState12[0],setNewSource=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),newDate=_useState14[0],setNewDate=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),newTags=_useState16[0],setNewTags=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),newSourceText=_useState18[0],setNewSourceText=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),newTimeline=_useState20[0],setNewTimeline=_useState20[1];var changeTitle=function changeTitle(e){setNewTitle(e.target.value);};var changeTags=function changeTags(e){setNewTags(e.target.value);};var changeDate=function changeDate(e){setNewDate(e.target.value);};var changeSourceText=function changeSourceText(e){setNewSourceText(e.target.value);};var changeSource=function changeSource(e){setNewSource(e.target.value);};var changeContent=function changeContent(e){setNewContent(e.target.value);};// fetch all event data items \n// pass timeline ID in from timeline component \nuseEffect(function(){var allEvents=collection(firestore,\"events\");getDocs(allEvents).then(function(snapshot){// snapshot is array of all documents\nvar tempEvents=[];snapshot.forEach(function(document){if(document.data().timeline===props.timeId){tempEvents.push(document.data());}});seteventArr(tempEvents.sort(sortByDate));// set initial state of eventArr\n// eventArr.sort(sortByDate);\n});},[]);var createEvent=function createEvent(){if(newTitle.length>0&&newContent.length>0){console.log(eventArr);var newArr2=[].concat(_toConsumableArray(eventArr),[{title:newTitle,content:newContent,source:newSource,sourceText:newSourceText,date:newDate,tags:newTags}]);seteventArr(newArr2.sort(sortByDate));console.log(eventArr);var docRef=addDoc(collection(firestore,\"events\"),{title:newTitle,content:newContent,source:newSource,sourceText:newSourceText,date:newDate,tags:newTags,timeline:props.timeId});setNewTimeline(docRef.id);setshowNew(false);setNewTitle(\"\");setNewContent(\"\");setNewDate(\"\");setNewSource(\"\");setNewSourceText(\"\");setNewTags(\"\");}};var sortByDate=function sortByDate(a,b){var months=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];var a1=a.date.split(' ');var b1=b.date.split(' ');if(parseInt(a1[a1.length-1])>parseInt(b1[b1.length-1])){return-1;}if(parseInt(a1[a1.length-1])<parseInt(b1[b1.length-1])){return 1;}if(a1.length===3&&b1.length===3&&a1[0]===b1[0]&&parseInt(a1[1].replace(',',''))>parseInt(b1[1].replace(',',''))){return-1;}if(a1.length===3&&b1.length===3&&a1[0]===b1[0]&&parseInt(a1[1].replace(',',''))<parseInt(b1[1].replace(',',''))){return 1;}if(a1[0]===b1[0]){return-1;}else{return months.indexOf(b1[0])-months.indexOf(a1[0]);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"timelineBox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"genInfo2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timeTitles\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"timelineTitle\",children:props.title}),/*#__PURE__*/_jsx(\"span\",{className:\"timeSubtitle\",children:props.subtitle})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setshowNew(!showNew);},className:\"createBut\",children:\"Add an event\"})]}),showNew?/*#__PURE__*/_jsxs(\"div\",{className:\"floatCen\",children:[\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"newEvent\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputSec\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"eventInput\",placeholder:\"event name\",type:\"text\",value:newTitle,onChange:changeTitle}),/*#__PURE__*/_jsx(\"input\",{className:\"eventInput\",placeholder:\"event date\",type:\"text\",value:newDate,onChange:changeDate}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputSec\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"eventInput\",placeholder:\"source link\",type:\"text\",value:newSource,onChange:changeSource}),/*#__PURE__*/_jsx(\"input\",{className:\"eventInput\",placeholder:\"source name\",type:\"text\",value:newSourceText,onChange:changeSourceText})]}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"inputSec\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"eventInput\",placeholder:\"tags (comma separated)\",type:\"text\",value:newTags,onChange:changeTags}),/*#__PURE__*/_jsx(\"input\",{className:\"eventInput\",placeholder:\"event content\",type:\"text\",value:newContent,onChange:changeContent}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"inputSec\",children:/*#__PURE__*/_jsx(\"button\",{onClick:createEvent,className:\"createBut2\",children:\"Create New Event\"})})]})]}):null,/*#__PURE__*/_jsx(\"div\",{className:\"eventBar\",children:eventArr.map(function(x,i){return/*#__PURE__*/_jsx(Event,{title:x.title,content:x.content,source:x.source,sourceText:x.sourceText,date:x.date,tags:x.tags},i);})})]});}export default Timeline;","map":{"version":3,"sources":["C:/Users/annag/Dropbox/Fall 2021/Source/history-doc/history-doc/src/Components/Timeline.js"],"names":["React","useState","useEffect","Event","firestore","addDoc","getDocs","collection","Timeline","props","eventArr","seteventArr","title","setTitle","showNew","setshowNew","newTitle","setNewTitle","newContent","setNewContent","newSource","setNewSource","newDate","setNewDate","newTags","setNewTags","newSourceText","setNewSourceText","newTimeline","setNewTimeline","changeTitle","e","target","value","changeTags","changeDate","changeSourceText","changeSource","changeContent","allEvents","then","snapshot","tempEvents","forEach","document","data","timeline","timeId","push","sort","sortByDate","createEvent","length","console","log","newArr2","content","source","sourceText","date","tags","docRef","id","a","b","months","a1","split","b1","parseInt","replace","indexOf","subtitle","map","x","i"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"; \r\nimport Event from \"./Event.js\";\r\nimport \"../styles/Timeline.css\";\r\nimport firestore from \"../firebase.js\";\r\nimport {addDoc, getDocs, collection} from \"firebase/firestore/lite\";\r\n\r\n\r\nfunction Timeline(props) {\r\n\r\n    // set state for all elements of timeline\r\n    const [eventArr, seteventArr] = useState([]); \r\n    const [title, setTitle] = useState(props.title);\r\n    const [showNew, setshowNew] = useState(false);\r\n\r\n    // new event fields \r\n    const [newTitle, setNewTitle] = useState(\"\"); \r\n    const [newContent, setNewContent] = useState(\"\");\r\n    const [newSource, setNewSource] = useState(\"\");\r\n    const [newDate, setNewDate] = useState(\"\"); \r\n    const [newTags, setNewTags] = useState(\"\");\r\n    const [newSourceText, setNewSourceText] = useState(\"\");\r\n    const [newTimeline, setNewTimeline] = useState(\"\");\r\n\r\n    const changeTitle = (e) => {\r\n        setNewTitle(e.target.value); \r\n    }; \r\n\r\n    const changeTags = (e) => {\r\n        setNewTags(e.target.value); \r\n    }; \r\n\r\n    const changeDate = (e) => {\r\n        setNewDate(e.target.value); \r\n    }; \r\n\r\n    const changeSourceText = (e) => {\r\n        setNewSourceText(e.target.value); \r\n    }; \r\n\r\n    const changeSource = (e) => {\r\n        setNewSource(e.target.value); \r\n    }; \r\n\r\n    const changeContent = (e) => {\r\n        setNewContent(e.target.value); \r\n    }; \r\n\r\n    // fetch all event data items \r\n    // pass timeline ID in from timeline component \r\n    useEffect(() => {\r\n        let allEvents = collection(firestore, \"events\"); \r\n            getDocs(allEvents).then(snapshot => {       // snapshot is array of all documents\r\n                let tempEvents = []; \r\n                snapshot.forEach(document => {\r\n                    if (document.data().timeline === props.timeId){ \r\n                    tempEvents.push(document.data())} \r\n                }); \r\n    \r\n            seteventArr(tempEvents.sort(sortByDate))        // set initial state of eventArr\r\n            // eventArr.sort(sortByDate);\r\n            }); \r\n        }, []); \r\n\r\n\r\n    const createEvent = () => {\r\n        if (newTitle.length > 0 && newContent.length >0) {\r\n            console.log(eventArr)\r\n            const newArr2 = ([...eventArr, {title: newTitle, content: newContent, source: newSource, sourceText: newSourceText, date: newDate, tags: newTags}])\r\n            seteventArr(newArr2.sort(sortByDate)); \r\n            console.log(eventArr)\r\n            const docRef = addDoc(collection(firestore, \"events\"), {\r\n                title: newTitle, content: newContent, \r\n                source: newSource, sourceText: newSourceText, \r\n                date: newDate, tags: newTags, timeline: props.timeId\r\n            })\r\n            setNewTimeline(docRef.id);\r\n            setshowNew(false); \r\n            setNewTitle(\"\"); \r\n            setNewContent(\"\"); \r\n            setNewDate(\"\"); \r\n            setNewSource(\"\"); \r\n            setNewSourceText(\"\"); \r\n            setNewTags(\"\"); \r\n        }\r\n    }; \r\n\r\n    const sortByDate = (a, b) => {\r\n        var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n        \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n        const a1 = a.date.split(' ');\r\n        const b1 = b.date.split(' '); \r\n        if (parseInt(a1[a1.length-1]) > parseInt(b1[b1.length-1])) {\r\n            return -1; \r\n        }\r\n        if (parseInt(a1[a1.length-1]) < parseInt(b1[b1.length-1])) {\r\n            return 1; \r\n        }\r\n        if (a1.length === 3 && b1.length === 3 &&  a1[0] === b1[0] && parseInt(a1[1].replace(',', '')) > parseInt(b1[1].replace(',', ''))) {\r\n            return -1; \r\n        }\r\n        if (a1.length === 3 && b1.length === 3 &&  a1[0] === b1[0] && parseInt(a1[1].replace(',', '')) < parseInt(b1[1].replace(',', ''))) {\r\n            return 1; \r\n        }\r\n        if (a1[0] === b1[0]) {\r\n            return -1; \r\n        }\r\n        else {\r\n            return months.indexOf(b1[0]) - months.indexOf(a1[0]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className = \"timelineBox\">\r\n            <div className = \"genInfo2\">\r\n                <div className='timeTitles'>\r\n        <span className = \"timelineTitle\">{props.title}</span>\r\n        <span className =\"timeSubtitle\">{props.subtitle}</span>\r\n        </div>\r\n        <button onClick={() => setshowNew(!showNew)} className = 'createBut'>Add an event</button>\r\n        </div>\r\n        {\r\n            showNew ?<div className = \"floatCen\"> <div className = \"newEvent\">\r\n            <div className = \"inputSec\">\r\n                 <input className= \"eventInput\" placeholder = \"event name\" type=\"text\" value={newTitle} onChange={changeTitle}/>\r\n                 <input className= \"eventInput\" placeholder = \"event date\" type=\"text\" value={newDate} onChange={changeDate}/> </div> \r\n                 <div className = \"inputSec\">\r\n                 <input className= \"eventInput\" placeholder = \"source link\" type=\"text\" value={newSource} onChange={changeSource}/>\r\n                 <input className= \"eventInput\" placeholder = \"source name\" type=\"text\" value={newSourceText} onChange={changeSourceText}/>\r\n                 </div> <div className = \"inputSec\">\r\n                 <input className= \"eventInput\" placeholder = \"tags (comma separated)\" type=\"text\" value={newTags} onChange={changeTags}/>\r\n                 <input className= \"eventInput\" placeholder = \"event content\" type=\"text\" value={newContent} onChange={changeContent}/> </div>\r\n                 <div className = \"inputSec\">\r\n                     <button onClick={createEvent} className = \"createBut2\">Create New Event</button>\r\n                 </div>\r\n            </div></div> : null\r\n        }\r\n        <div className = \"eventBar\">\r\n       {eventArr.map((x, i) => \r\n        <Event key={i} title = {x.title} content ={x.content} source={x.source} sourceText={x.sourceText} date={x.date} tags={x.tags}></Event>)}\r\n     </div>\r\n        </div>\r\n    ); \r\n}\r\n\r\nexport default Timeline; "]},"metadata":{},"sourceType":"module"}