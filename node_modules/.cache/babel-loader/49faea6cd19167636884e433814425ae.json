{"ast":null,"code":"import _toConsumableArray from\"C:/Users/annag/Dropbox/Fall 2021/Source/history-doc/history-doc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/annag/Dropbox/Fall 2021/Source/history-doc/history-doc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/annag/Dropbox/Fall 2021/Source/history-doc/history-doc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Timeline from\"./Timeline\";import Event from\"./Event.js\";import\"../styles/MainBod.css\";import{BrowserRouter as Router,Switch,Route,Link}from\"react-router-dom\";import firestore from\"../firebase.js\";import{addDoc,getDocs,collection}from\"firebase/firestore/lite\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MainBod(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),newTimeTitle=_useState2[0],setNewTimeTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newTimeSubtitle=_useState4[0],setNewTimeSubtitle=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showNewTime=_useState6[0],setshowNewTime=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),timeArr=_useState8[0],settimeArr=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),searchVal=_useState10[0],setsearchVal=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),searchRes=_useState12[0],setsearchRes=_useState12[1];var changesearchVal=function changesearchVal(e){setsearchVal(e.target.value);};var changeNewTimeTitle=function changeNewTimeTitle(e){setNewTimeTitle(e.target.value);};var changeNewTimeSubtitle=function changeNewTimeSubtitle(e){setNewTimeSubtitle(e.target.value);};useEffect(function(){var allTimes=collection(firestore,\"timelines\");getDocs(allTimes).then(function(snapshot){// snapshot is array of all documents\nvar tempTimelines=[];snapshot.forEach(function(document){tempTimelines.push(_objectSpread(_objectSpread({},document.data()),{},{id:document.id}));});settimeArr(tempTimelines);// set initial state of timeArr\n});},[]);var createTime=function createTime(){if(newTimeTitle.length>0&&newTimeSubtitle.length>0){var docRef=addDoc(collection(firestore,\"timelines\"),{title:newTimeTitle,subtitle:newTimeSubtitle});settimeArr([{id:docRef.id,title:newTimeTitle,subtitle:newTimeSubtitle}].concat(_toConsumableArray(timeArr)));setNewTimeSubtitle(\"\");setNewTimeTitle(\"\");setshowNewTime(false);}};var getSearchRes=function getSearchRes(){// reroute to new page on click \nif(searchVal===\"\"){return;}var allEvents=collection(firestore,\"events\");getDocs(allEvents).then(function(snapshot){// snapshot is array of all documents\nvar tempEvents=[];snapshot.forEach(function(document){if(document.data().content.toLowerCase().includes(searchVal.toLowerCase())||document.data().title.toLowerCase().includes(searchVal.toLowerCase())){tempEvents.push(document.data());}});setsearchRes(tempEvents.sort(sortByDate));});};var goBack=function goBack(){setsearchVal(\"\");};var sortByDate=function sortByDate(a,b){var months=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];var a1=a.date.split(' ');var b1=b.date.split(' ');if(parseInt(a1[a1.length-1])>parseInt(b1[b1.length-1])){return-1;}if(parseInt(a1[a1.length-1])<parseInt(b1[b1.length-1])){return 1;}if(a1.length===3&&b1.length===3&&a1[0]===b1[0]&&parseInt(a1[1].replace(',',''))>parseInt(b1[1].replace(',',''))){return-1;}if(a1.length===3&&b1.length===3&&a1[0]===b1[0]&&parseInt(a1[1].replace(',',''))<parseInt(b1[1].replace(',',''))){return 1;}if(a1[0]===b1[0]){return-1;}else{return months.indexOf(b1[0])-months.indexOf(a1[0]);}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mainHead\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pageTitle\",children:\"Mr.Worldwide\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"subDiv\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"subtitle\",children:\"Global Events Tracking.\"}),/*#__PURE__*/_jsx(\"span\",{className:\"explain\",children:\"Keep track of foreign affairs by building timelines of events. View events organized in sequential order and search for keywords to find trends across different timelines.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchBar\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"search for a keyword\",type:\"text\",value:searchVal,onChange:changesearchVal}),/*#__PURE__*/_jsx(\"button\",{className:\"searchButton\",onClick:getSearchRes,children:/*#__PURE__*/_jsx(Link,{to:\"/searchRes\",children:\"Search\"})})]})]}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsxs(Route,{exact:true,path:\"/searchRes\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"back\",children:/*#__PURE__*/_jsx(\"button\",{className:\"searchButton2\",onClick:goBack,children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back to Timelines\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchTitle\",children:[\"Search Results for: \",searchVal]}),/*#__PURE__*/_jsx(\"div\",{className:\"searchEvents\",children:searchRes.map(function(x,i){return/*#__PURE__*/_jsx(Event,{title:x.title,content:x.content,source:x.source,sourceText:x.sourceText,date:x.date,tags:x.tags},i);})})]}),/*#__PURE__*/_jsxs(Route,{exact:true,path:\"/\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timelinesHead\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"thTitle\",children:\"Your Timelines\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setshowNewTime(!showNewTime);},className:\"addTime\",children:\"Create Timeline\"})]}),showNewTime?/*#__PURE__*/_jsxs(\"div\",{className:\"inpTime\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"inputList\",children:[\" \",/*#__PURE__*/_jsx(\"li\",{children:\"Create a new timeline\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Add events\"})]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"timeline title\",type:\"text\",value:newTimeTitle,onChange:changeNewTimeTitle}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"timeline subtitle\",type:\"text\",value:newTimeSubtitle,onChange:changeNewTimeSubtitle}),/*#__PURE__*/_jsx(\"button\",{onClick:createTime,className:\"addTline\",children:\"Add Timeline\"})]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"pageCenter\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"timelineBox\",children:/*#__PURE__*/_jsx(\"div\",{className:\"tLines\",children:timeArr.map(function(x,i){return/*#__PURE__*/_jsx(Timeline,{timeId:x.id,title:x.title,subtitle:x.subtitle},i);})})}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"podBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"podTitle\",children:\"Get Caught Up\"}),/*#__PURE__*/_jsx(\"div\",{className:\"podSub\",children:\"Podcasts\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"podList\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://www.bbc.co.uk/programmes/p02nq0gn/episodes/downloads\",children:\"BBC Global News\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://medialab.virginia.edu/democracyindanger\",children:\"Democracy in Danger\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://www.powercorruptspodcast.com/\",children:\"Power Corrupts\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://www.american.edu/sis/big-world/\",children:\"Big World Podcast\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://www.dancarlin.com/hardcore-history-series/\",children:\"Hardcore History\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://www.mei.edu/podcast\",children:\"Middle East Focus\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://podcasts.apple.com/us/podcast/middle-east-analysis/id454157967\",children:\"Middle East Analysis\"})})]})]})]})]})]})]})});}export default MainBod;","map":{"version":3,"sources":["C:/Users/annag/Dropbox/Fall 2021/Source/history-doc/history-doc/src/Components/MainBod.js"],"names":["React","useEffect","useState","Timeline","Event","BrowserRouter","Router","Switch","Route","Link","firestore","addDoc","getDocs","collection","MainBod","newTimeTitle","setNewTimeTitle","newTimeSubtitle","setNewTimeSubtitle","showNewTime","setshowNewTime","timeArr","settimeArr","searchVal","setsearchVal","searchRes","setsearchRes","changesearchVal","e","target","value","changeNewTimeTitle","changeNewTimeSubtitle","allTimes","then","snapshot","tempTimelines","forEach","document","push","data","id","createTime","length","docRef","title","subtitle","getSearchRes","allEvents","tempEvents","content","toLowerCase","includes","sort","sortByDate","goBack","a","b","months","a1","date","split","b1","parseInt","replace","indexOf","map","x","i","source","sourceText","tags"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\"; \r\nimport Timeline from \"./Timeline\";\r\nimport Event from \"./Event.js\";\r\nimport \"../styles/MainBod.css\";\r\nimport {BrowserRouter as Router, Switch, Route, Link} from \"react-router-dom\"; \r\nimport firestore from \"../firebase.js\";\r\nimport {addDoc, getDocs, collection} from \"firebase/firestore/lite\";\r\n\r\nfunction MainBod() {\r\n    const [newTimeTitle, setNewTimeTitle] = useState(\"\"); \r\n    const [newTimeSubtitle, setNewTimeSubtitle] = useState(\"\"); \r\n    const [showNewTime, setshowNewTime] = useState(false);\r\n    const [timeArr, settimeArr] = useState([]); \r\n    const [searchVal, setsearchVal] = useState(\"\"); \r\n    const [searchRes, setsearchRes] = useState([]); \r\n\r\n    const changesearchVal = (e) => {\r\n        setsearchVal(e.target.value); \r\n    }; \r\n    \r\n    const changeNewTimeTitle = (e) => {\r\n        setNewTimeTitle(e.target.value); \r\n    }; \r\n\r\n    const changeNewTimeSubtitle = (e) => {\r\n        setNewTimeSubtitle(e.target.value); \r\n    }; \r\n\r\n    useEffect(() => {\r\n        let allTimes = collection(firestore, \"timelines\"); \r\n            getDocs(allTimes).then(snapshot => {       // snapshot is array of all documents\r\n                let tempTimelines = []; \r\n                snapshot.forEach(document => {\r\n                    tempTimelines.push({...document.data(), id: document.id})\r\n                }); \r\n    \r\n            settimeArr(tempTimelines)        // set initial state of timeArr\r\n            }); \r\n        }, []); \r\n\r\n        const createTime= () => {\r\n        if (newTimeTitle.length > 0 && newTimeSubtitle.length >0) {\r\n            const docRef = addDoc(collection(firestore, \"timelines\"), {\r\n                title: newTimeTitle, subtitle: newTimeSubtitle})\r\n            settimeArr([{id: docRef.id, title: newTimeTitle, subtitle: newTimeSubtitle}, ...timeArr])\r\n            setNewTimeSubtitle(\"\"); \r\n            setNewTimeTitle(\"\"); \r\n            setshowNewTime(false); \r\n            }\r\n    }; \r\n\r\n    const getSearchRes = () => {   // reroute to new page on click \r\n        if (searchVal === \"\") {\r\n            return; \r\n        }\r\n        let allEvents = collection(firestore, \"events\"); \r\n        getDocs(allEvents).then(snapshot => {       // snapshot is array of all documents\r\n                let tempEvents = []; \r\n                snapshot.forEach(document => {\r\n                    if (document.data().content.toLowerCase().includes(searchVal.toLowerCase()) || document.data().title.toLowerCase().includes(searchVal.toLowerCase())) { \r\n                        tempEvents.push(document.data()) \r\n                        } \r\n                });\r\n                setsearchRes(tempEvents.sort(sortByDate)); \r\n     });\r\n    }\r\n\r\n    const goBack = () => {\r\n        setsearchVal(\"\"); \r\n    }\r\n\r\n    const sortByDate = (a, b) => {\r\n        var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n        \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n        const a1 = a.date.split(' ');\r\n        const b1 = b.date.split(' '); \r\n        if (parseInt(a1[a1.length-1]) > parseInt(b1[b1.length-1])) {\r\n            return -1; \r\n        }\r\n        if (parseInt(a1[a1.length-1]) < parseInt(b1[b1.length-1])) {\r\n            return 1; \r\n        }\r\n        if (a1.length === 3 && b1.length === 3 &&  a1[0] === b1[0] && parseInt(a1[1].replace(',', '')) > parseInt(b1[1].replace(',', ''))) {\r\n            return -1; \r\n        }\r\n        if (a1.length === 3 && b1.length === 3 &&  a1[0] === b1[0] && parseInt(a1[1].replace(',', '')) < parseInt(b1[1].replace(',', ''))) {\r\n            return 1; \r\n        }\r\n        if (a1[0] === b1[0]) {\r\n            return -1; \r\n        }\r\n        else {\r\n            return months.indexOf(b1[0]) - months.indexOf(a1[0]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Router>\r\n            <div className=\"mainHead\">\r\n            <div className=\"pageTitle\">Mr.Worldwide</div>\r\n            <div className=\"subDiv\">\r\n            <span className=\"subtitle\">Global Events Tracking.</span>\r\n            <span className=\"explain\">Keep track of foreign affairs by building timelines of events. View events organized in sequential order and search for keywords to find trends across different timelines.</span>\r\n            </div>\r\n            <div className=\"searchBar\">\r\n            <input placeholder=\"search for a keyword\" type=\"text\" value={searchVal} onChange={changesearchVal}></input>\r\n            <button className=\"searchButton\" onClick={getSearchRes}><Link to=\"/searchRes\">Search</Link></button>\r\n            </div>\r\n            </div>\r\n            <Switch>\r\n                <Route exact path=\"/searchRes\">\r\n                    <div className=\"back\">\r\n                    <button className=\"searchButton2\" onClick={goBack}><Link to=\"/\">Go Back to Timelines</Link></button>\r\n                    </div>\r\n                    <div className=\"searchTitle\">Search Results for: {searchVal}</div>\r\n                    <div className=\"searchEvents\"> \r\n                    {searchRes.map((x, i) => \r\n        <Event key={i} title = {x.title} content ={x.content} source={x.source} sourceText={x.sourceText} date={x.date} tags={x.tags}></Event>)}\r\n        </div>\r\n                    </Route> \r\n            <Route exact path=\"/\">\r\n            <div className=\"timelinesHead\">\r\n        <span className=\"thTitle\">Your Timelines</span>\r\n        <button onClick={() => setshowNewTime(!showNewTime)} className = \"addTime\">Create Timeline</button>\r\n            </div>\r\n    \r\n            {  showNewTime ?<div className = \"inpTime\"> \r\n                <ul className=\"inputList\"> <li>Create a new timeline</li> \r\n                <li>Add events</li>\r\n                </ul>\r\n                <input placeholder = \"timeline title\" type=\"text\" value={newTimeTitle} onChange={changeNewTimeTitle}></input>\r\n                <input placeholder = \"timeline subtitle\" type=\"text\" value={newTimeSubtitle} onChange={changeNewTimeSubtitle}></input>\r\n                <button onClick={createTime} className= \"addTline\">Add Timeline</button>\r\n            </div> : null} \r\n            <div className = \"pageCenter\">\r\n            <div className =\"timelineBox\">\r\n        <div className=\"tLines\">\r\n            {timeArr.map((x, i) => \r\n              <Timeline key={i} timeId = {x.id} title = {x.title} subtitle={x.subtitle}></Timeline>)}\r\n              </div>\r\n            </div> <div className = \"podBox\">\r\n                <div className= \"podTitle\">Get Caught Up</div>\r\n                <div className =\"podSub\">Podcasts</div>\r\n                <ul className=\"podList\"><li><a href=\"https://www.bbc.co.uk/programmes/p02nq0gn/episodes/downloads\">BBC Global News</a></li>\r\n                <li><a href=\"https://medialab.virginia.edu/democracyindanger\">Democracy in Danger</a></li>\r\n                <li><a href=\"https://www.powercorruptspodcast.com/\">Power Corrupts</a></li>\r\n                <li><a href=\"https://www.american.edu/sis/big-world/\">Big World Podcast</a></li>\r\n                <li><a href=\"https://www.dancarlin.com/hardcore-history-series/\">Hardcore History</a></li>\r\n                <li><a href=\"https://www.mei.edu/podcast\">Middle East Focus</a></li>\r\n                <li><a href=\"https://podcasts.apple.com/us/podcast/middle-east-analysis/id454157967\">Middle East Analysis</a></li>\r\n                </ul>\r\n            </div>\r\n            </div>\r\n            </Route>\r\n            </Switch> \r\n            </Router>\r\n        </div>\r\n    ); \r\n}\r\n\r\nexport default MainBod; \r\n"]},"metadata":{},"sourceType":"module"}